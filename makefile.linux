
# Version to build
VERSION = 1

#CC     = $(CROSS_COMPILE)gcc 
#CXX    = $(CROSS_COMPILE)c++ 
#AS     = $(CROSS_COMPILE)as 
#LD     = $(CROSS_COMPILE)ld 
#RANLIB = $(CROSS_COMPILE)ranlib 
#RM     = delete
# RM     = rm

warnings = -Wuninitialized -Wsign-compare -Wunused-variable

objects_dir = objs_amoskittens/

main_objects = commands.cpp \
			commandsData.cpp \
			commandsString.cpp \
			commandsMath.cpp \
			commandsBanks.cpp \
			commandsErrors.cpp \
			commandsMachine.cpp \
			commandsSound.cpp \
			commandsDisc.cpp \
			commandsObjectControl.cpp \
			commandsHardwareSprite.cpp \
			commandsBlitterObject.cpp \
			commandsBackgroundGraphics.cpp \
			commandsAmal.cpp \
			commandsMenu.cpp \
			commandsFonts.cpp \
			commandsRead.cpp \
			commandsGfx.cpp \
			commandsOn.cpp \
			commandsText.cpp \
			commandsScreens.cpp \
			commandsKeyboard.cpp \
			AmalCompiler.cpp \
			AmalCommands.cpp \
			ext_compact.cpp \
			ext_turbo.cpp \
			debug.cpp \
			pass1.cpp \
			errors.cpp \
			stack.cpp \
			readhunk.cpp \
			var_helper.cpp \
			channel.cpp \
			amal_object_bob.cpp \
			amal_object_sprite.cpp \
			amal_object_screen_display.cpp \
			amal_object_screen_offset.cpp \
			screen_helper.cpp \
			os\linux\engine.cpp \
			os\linux\bitmap_font.cpp \
			os\linux\init.cpp \
			os\linux\cleanup.cpp \
			os\linux\joystick.cpp \
			os\linux\spawn.cpp

objects_in_dir = ${main_objects:%.cpp=${objects_dir}%.o}
main_SRCS = AmosKittens.cpp

objects = $(main_objects:.cpp=.o)
programs= $(main_SRCS:.cpp=.exe)

all:	 $(objects_in_dir) $(programs) 

$(objects_dir)%.o:	%.cpp debug.h 
	g++ $(warnings) -c -O2 -D__USE_INLINE__ $(@:${objects_dir}%.o=%.cpp) -o $@

AmosKittens.exe:	AmosKittens.cpp	 $(objects_in_dir)
	g++ $(warnings) -O2 -D__USE_INLINE__ $(@:.exe=.cpp) $(objects_in_dir) -o $@

%.exe:		%.cpp $(objects_in_dir)
	g++ $(warnings) -O2 -D__USE_INLINE__ $(@:.exe=.cpp) $(objects_in_dir) -o $@

clean:
	@rm $(programs) $(objects_in_dir)

.PHONY: revision 
revision:
	bumprev $(VERSION) $(programs)